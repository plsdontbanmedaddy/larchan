{
    "version": 2,
    "builds": [
        {
            "src": "api/index.php",
            "use": "vercel-php@0.7.4",
            "config": {
                "build_command": "php artisan config:clear && composer install --no-dev --optimize-autoloader && npm install && npm run build && php artisan config:cache && php artisan route:cache && php artisan migrate --force"
            }
        }
    ],
    "routes": [
        { "src": "/build/(.*)", "dest": "/public/build/$1" },
        { "src": "/favicon.ico", "dest": "/public/favicon.ico" },
        { "src": "/robots.txt", "dest": "/public/robots.txt" },
        { "src": "/apple-touch-icon.png", "dest": "/public/apple-touch-icon.png"},
        { "src": "/favicon.svg", "dest": "/public/favicon.svg"},
        { "src": "/(.*)", "dest": "/api/index.php" }
    ]
}